import{c as V,d as N,B as v,i as h,j as _,f as m,b as r,l as g,e as x,u as i,C as S,k as P,v as z,n as l,t as w,a as d,m as p,w as E,p as G,o,K as L}from"./DqqAIi0S.js";import{u as j}from"./Bok9pWfO.js";import{u as q}from"./D4JIeS1e.js";import{C as c}from"./BpfzOGRG.js";import{X as y}from"./rfZ2jDsl.js";const M=V("LockIcon",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),T={class:"min-h-[80vh] flex items-center justify-center py-12 px-4"},A={class:"max-w-md w-full"},D={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-200 dark:border-gray-700 p-8"},I={class:"text-center mb-8"},K={class:"w-16 h-16 rounded-xl bg-gradient-to-br from-primary-500 to-primary-600 flex items-center justify-center mx-auto mb-4 shadow-lg"},R={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},U={class:"mt-2 space-y-1"},Y={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},F=["disabled"],H={key:0,class:"mt-6 p-4 bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-800 rounded-lg"},O={class:"flex items-start gap-3"},ee=N({__name:"reset-password",setup(X){j({title:"Şifre Sıfırla - Otobia"});const t=v({password:"",confirmPassword:""}),s=v({password:"",confirmPassword:""}),u=h(!1),k=h(!1),a=_(()=>{const n=t.password;return{length:n.length>=8,uppercase:/[A-Z]/.test(n),number:/[0-9]/.test(n)}}),B=_(()=>t.password.length>=8&&a.value.uppercase&&a.value.number&&t.password===t.confirmPassword),C=async()=>{if(s.password="",s.confirmPassword="",t.password.length<8){s.password="Şifre en az 8 karakter olmalıdır";return}if(!a.value.uppercase){s.password="Şifre en az bir büyük harf içermelidir";return}if(!a.value.number){s.password="Şifre en az bir rakam içermelidir";return}if(t.password!==t.confirmPassword){s.confirmPassword="Şifreler eşleşmiyor";return}u.value=!0;try{const e=L().query.token;if(!e)throw new Error("Geçersiz veya eksik token");await q().post("/auth/reset-password",{token:e,password:t.password,confirmPassword:t.confirmPassword}),k.value=!0}catch(n){s.password=n.message||"Bir hata oluştu"}finally{u.value=!1}};return(n,e)=>{const b=G;return o(),m("div",T,[r("div",A,[r("div",D,[r("div",I,[r("div",K,[x(i(M),{class:"w-8 h-8 text-white"})]),e[2]||(e[2]=r("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-2"}," Yeni Şifre Belirle ",-1)),e[3]||(e[3]=r("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Güvenli bir şifre oluşturun ",-1))]),r("form",{onSubmit:S(C,["prevent"]),class:"space-y-5"},[r("div",null,[e[7]||(e[7]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Yeni Şifre * ",-1)),P(r("input",{"onUpdate:modelValue":e[0]||(e[0]=f=>t.password=f),type:"password",required:"",placeholder:"En az 8 karakter",class:l(["w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 transition-all",{"border-red-500":s.password}])},null,2),[[z,t.password]]),s.password?(o(),m("p",R,w(s.password),1)):g("",!0),r("div",U,[r("div",{class:l(["flex items-center gap-2 text-xs",a.value.length?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400"])},[a.value.length?(o(),d(i(c),{key:0,class:"w-3 h-3"})):(o(),d(i(y),{key:1,class:"w-3 h-3"})),e[4]||(e[4]=p(" En az 8 karakter ",-1))],2),r("div",{class:l(["flex items-center gap-2 text-xs",a.value.uppercase?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400"])},[a.value.uppercase?(o(),d(i(c),{key:0,class:"w-3 h-3"})):(o(),d(i(y),{key:1,class:"w-3 h-3"})),e[5]||(e[5]=p(" Büyük harf içermeli ",-1))],2),r("div",{class:l(["flex items-center gap-2 text-xs",a.value.number?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400"])},[a.value.number?(o(),d(i(c),{key:0,class:"w-3 h-3"})):(o(),d(i(y),{key:1,class:"w-3 h-3"})),e[6]||(e[6]=p(" Rakam içermeli ",-1))],2)])]),r("div",null,[e[8]||(e[8]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Şifre Tekrar * ",-1)),P(r("input",{"onUpdate:modelValue":e[1]||(e[1]=f=>t.confirmPassword=f),type:"password",required:"",placeholder:"Şifrenizi tekrar girin",class:l(["w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 transition-all",{"border-red-500":s.confirmPassword}])},null,2),[[z,t.confirmPassword]]),s.confirmPassword?(o(),m("p",Y,w(s.confirmPassword),1)):g("",!0)]),r("button",{type:"submit",disabled:u.value||!B.value,class:"w-full px-4 py-3 bg-gradient-to-r from-primary-500 to-primary-600 text-white font-semibold rounded-lg hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed"},w(u.value?"Kaydediliyor...":"Şifreyi Güncelle"),9,F)],32),k.value?(o(),m("div",H,[r("div",O,[x(i(c),{class:"w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0 mt-0.5"}),r("div",null,[e[10]||(e[10]=r("p",{class:"text-sm font-medium text-green-800 dark:text-green-300"}," Şifre başarıyla güncellendi! ",-1)),x(b,{to:"/login",class:"text-sm text-green-700 dark:text-green-400 hover:underline mt-1 inline-block"},{default:E(()=>[...e[9]||(e[9]=[p(" Giriş sayfasına dön → ",-1)])]),_:1})])])])):g("",!0)])])])}}});export{ee as default};
