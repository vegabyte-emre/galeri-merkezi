import{V as z,i as k,W as w,X as T,Y as O,Z as D,$ as I,a0 as R}from"./Ba7BxnQD.js";function v(r){return typeof r=="string"?`'${r}'`:new U().serialize(r)}const U=(function(){class r{#e=new Map;compare(e,t){const i=typeof e,s=typeof t;return i==="string"&&s==="string"?e.localeCompare(t):i==="number"&&s==="number"?e-t:String.prototype.localeCompare.call(this.serialize(e,!0),this.serialize(t,!0))}serialize(e,t){if(e===null)return"null";switch(typeof e){case"string":return t?e:`'${e}'`;case"bigint":return`${e}n`;case"object":return this.$object(e);case"function":return this.$function(e)}return String(e)}serializeObject(e){const t=Object.prototype.toString.call(e);if(t!=="[object Object]")return this.serializeBuiltInType(t.length<10?`unknown:${t}`:t.slice(8,-1),e);const i=e.constructor,s=i===Object||i===void 0?"":i.name;if(s!==""&&globalThis[s]===i)return this.serializeBuiltInType(s,e);if(typeof e.toJSON=="function"){const o=e.toJSON();return s+(o!==null&&typeof o=="object"?this.$object(o):`(${this.serialize(o)})`)}return this.serializeObjectEntries(s,Object.entries(e))}serializeBuiltInType(e,t){const i=this["$"+e];if(i)return i.call(this,t);if(typeof t?.entries=="function")return this.serializeObjectEntries(e,t.entries());throw new Error(`Cannot serialize ${e}`)}serializeObjectEntries(e,t){const i=Array.from(t).sort((o,a)=>this.compare(o[0],a[0]));let s=`${e}{`;for(let o=0;o<i.length;o++){const[a,u]=i[o];s+=`${this.serialize(a,!0)}:${this.serialize(u)}`,o<i.length-1&&(s+=",")}return s+"}"}$object(e){let t=this.#e.get(e);return t===void 0&&(this.#e.set(e,`#${this.#e.size}`),t=this.serializeObject(e),this.#e.set(e,t)),t}$function(e){const t=Function.prototype.toString.call(e);return t.slice(-15)==="[native code] }"?`${e.name||""}()[native]`:`${e.name}(${e.length})${t.replace(/\s*\n\s*/g,"")}`}$Array(e){let t="[";for(let i=0;i<e.length;i++)t+=this.serialize(e[i]),i<e.length-1&&(t+=",");return t+"]"}$Date(e){try{return`Date(${e.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(e){return`ArrayBuffer[${new Uint8Array(e).join(",")}]`}$Set(e){return`Set${this.$Array(Array.from(e).sort((t,i)=>this.compare(t,i)))}`}$Map(e){return this.serializeObjectEntries("Map",e.entries())}}for(const n of["Error","RegExp","URL"])r.prototype["$"+n]=function(e){return`${n}(${e})`};for(const n of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])r.prototype["$"+n]=function(e){return`${n}[${e.join(",")}]`};for(const n of["BigInt64Array","BigUint64Array"])r.prototype["$"+n]=function(e){return`${n}[${e.join("n,")}${e.length>0?"n":""}]`};return r})();function N(r,n){return r===n||v(r)===v(n)}function M(r,n){if(typeof r!="string")throw new TypeError("argument str must be a string");const e={},t=n||{},i=t.decode||P;let s=0;for(;s<r.length;){const o=r.indexOf("=",s);if(o===-1)break;let a=r.indexOf(";",s);if(a===-1)a=r.length;else if(a<o){s=r.lastIndexOf(";",o-1)+1;continue}const u=r.slice(s,o).trim();if(t?.filter&&!t?.filter(u)){s=a+1;continue}if(e[u]===void 0){let c=r.slice(o+1,a).trim();c.codePointAt(0)===34&&(c=c.slice(1,-1)),e[u]=x(c,i)}s=a+1}return e}function P(r){return r.includes("%")?decodeURIComponent(r):r}function x(r,n){try{return n(r)}catch{return r}}const g=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function j(r,n,e){const t=e||{},i=t.encode||encodeURIComponent;if(typeof i!="function")throw new TypeError("option encode is invalid");if(!g.test(r))throw new TypeError("argument name is invalid");const s=i(n);if(s&&!g.test(s))throw new TypeError("argument val is invalid");let o=r+"="+s;if(t.maxAge!==void 0&&t.maxAge!==null){const a=t.maxAge-0;if(Number.isNaN(a)||!Number.isFinite(a))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(a)}if(t.domain){if(!g.test(t.domain))throw new TypeError("option domain is invalid");o+="; Domain="+t.domain}if(t.path){if(!g.test(t.path))throw new TypeError("option path is invalid");o+="; Path="+t.path}if(t.expires){if(!B(t.expires)||Number.isNaN(t.expires.valueOf()))throw new TypeError("option expires is invalid");o+="; Expires="+t.expires.toUTCString()}if(t.httpOnly&&(o+="; HttpOnly"),t.secure&&(o+="; Secure"),t.priority)switch(typeof t.priority=="string"?t.priority.toLowerCase():t.priority){case"low":{o+="; Priority=Low";break}case"medium":{o+="; Priority=Medium";break}case"high":{o+="; Priority=High";break}default:throw new TypeError("option priority is invalid")}if(t.sameSite)switch(typeof t.sameSite=="string"?t.sameSite.toLowerCase():t.sameSite){case!0:{o+="; SameSite=Strict";break}case"lax":{o+="; SameSite=Lax";break}case"strict":{o+="; SameSite=Strict";break}case"none":{o+="; SameSite=None";break}default:throw new TypeError("option sameSite is invalid")}return t.partitioned&&(o+="; Partitioned"),o}function B(r){return Object.prototype.toString.call(r)==="[object Date]"||r instanceof Date}function f(r){if(typeof r!="object")return r;var n,e,t=Object.prototype.toString.call(r);if(t==="[object Object]"){if(r.constructor!==Object&&typeof r.constructor=="function"){e=new r.constructor;for(n in r)r.hasOwnProperty(n)&&e[n]!==r[n]&&(e[n]=f(r[n]))}else{e={};for(n in r)n==="__proto__"?Object.defineProperty(e,n,{value:f(r[n]),configurable:!0,enumerable:!0,writable:!0}):e[n]=f(r[n])}return e}if(t==="[object Array]"){for(n=r.length,e=Array(n);n--;)e[n]=f(r[n]);return e}return t==="[object Set]"?(e=new Set,r.forEach(function(i){e.add(f(i))}),e):t==="[object Map]"?(e=new Map,r.forEach(function(i,s){e.set(f(s),f(i))}),e):t==="[object Date]"?new Date(+r):t==="[object RegExp]"?(e=new RegExp(r.source,r.flags),e.lastIndex=r.lastIndex,e):t==="[object DataView]"?new r.constructor(f(r.buffer)):t==="[object ArrayBuffer]"?r.slice(0):t.slice(-6)==="Array]"?new r.constructor(r):r}const L={path:"/",watch:!0,decode:r=>z(decodeURIComponent(r)),encode:r=>encodeURIComponent(typeof r=="string"?r:JSON.stringify(r))},m=globalThis.cookieStore;function F(r,n){const e={...L,...n};e.filter??=c=>c===r;const t=A(e)||{};let i;e.maxAge!==void 0?i=e.maxAge*1e3:e.expires&&(i=e.expires.getTime()-Date.now());const s=i!==void 0&&i<=0,o=s||t[r]===void 0||t[r]===null,a=f(s?void 0:t[r]??e.default?.()),u=i&&!s?q(a,i,e.watch&&e.watch!=="shallow"):k(a);{let c=null;try{!m&&typeof BroadcastChannel<"u"&&(c=new BroadcastChannel(`nuxt:cookies:${r}`))}catch{}const l=(p=!1)=>{!p&&(e.readonly||N(u.value,t[r]))||(J(r,u.value,e),t[r]=f(u.value),c?.postMessage({value:e.encode(u.value)}))},h=p=>{const d=p.refresh?A(e)?.[r]:e.decode(p.value);y=!0,u.value=d,t[r]=f(d),I(()=>{y=!1})};let y=!1;const $=!!O();if($&&w(()=>{y=!0,l(),c?.close()}),m){const p=d=>{const S=d.changed.find(b=>b.name===r),C=d.deleted.find(b=>b.name===r);S&&h({value:S.value}),C&&h({value:null})};m.addEventListener("change",p),$&&w(()=>m.removeEventListener("change",p))}else c&&(c.onmessage=({data:p})=>h(p));e.watch&&T(u,()=>{y||l()},{deep:e.watch!=="shallow"}),o&&l(o)}return u}function A(r={}){return M(document.cookie,r)}function _(r,n,e={}){return n==null?j(r,n,{...e,maxAge:-1}):j(r,n,e)}function J(r,n,e={}){document.cookie=_(r,n,e)}const E=2147483647;function q(r,n,e){let t,i,s=0;const o=e?k(r):{value:r};return O()&&w(()=>{i?.(),clearTimeout(t)}),D((a,u)=>{e&&(i=T(o,u));function c(){s=0,clearTimeout(t);const l=n-s,h=l<E?l:E;t=setTimeout(()=>{if(s+=h,s<n)return c();o.value=void 0,u()},h)}return{get(){return a(),o.value},set(l){c(),o.value=l,u()}}})}const V=()=>{const n=R().public.apiUrl,e=async(t,i={})=>{const s=F("auth_token"),{responseType:o,...a}=i,u={...a.headers||{}};a.body instanceof FormData||(u["Content-Type"]="application/json"),s.value&&(u.Authorization=`Bearer ${s.value}`);const c=await fetch(`${n}${t}`,{...a,headers:u});if(!c.ok){let l="Request failed";try{l=(await c.json()).message||l}catch{l=`HTTP ${c.status}: ${c.statusText}`}throw new Error(l)}return o==="blob"?c.blob():c.json()};return{get:(t,i)=>e(t,{...i,method:"GET"}),post:(t,i,s)=>e(t,{...s,method:"POST",body:i instanceof FormData?i:JSON.stringify(i)}),put:(t,i,s)=>e(t,{...s,method:"PUT",body:i instanceof FormData?i:JSON.stringify(i)}),delete:(t,i)=>e(t,{...i,method:"DELETE"})}};export{F as a,V as u};
