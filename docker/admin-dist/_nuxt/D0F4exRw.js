import{d as S,i as d,j as D,l as T,e as l,a as e,m as A,v as U,b as c,h as j,u as p,F as v,r as f,c as x,o as s,n as y,f as L,t as n}from"./DhZVrtZb.js";import{u as G}from"./B0egXiWe.js";import{u as V}from"./ZU3_NlSd.js";import{_ as w,T as _}from"./B2svNpob.js";import{D as $}from"./P61tqC2B.js";import{B as C}from"./dMRAtfuO.js";import{B as O}from"./fPnIPLUp.js";import{U as Y}from"./Qs9ctmia.js";import"./BBSYxXC8.js";const E={class:"space-y-6"},N={class:"flex items-center justify-between"},F={class:"flex items-center gap-3"},K={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},M={class:"flex items-center justify-between mb-4"},q={class:"text-2xl font-bold text-gray-900 dark:text-white mb-1"},z={class:"text-sm text-gray-600 dark:text-gray-400"},H={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},I={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700"},P={key:1,class:"h-64 flex items-center justify-center bg-gradient-to-br from-primary-50 to-primary-100 dark:from-primary-900/20 dark:to-primary-800/20 rounded-xl"},J={class:"text-center"},Q={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700"},W={key:1,class:"h-64 flex items-center justify-center bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-xl"},X={class:"text-center"},Z={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700"},ee={class:"overflow-x-auto"},te={class:"w-full"},re={class:"divide-y divide-gray-200 dark:divide-gray-700"},ae={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},se={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},oe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},le={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},me=S({__name:"reports",setup(ne){const u=G(),g=V(),b=d(!1),i=d("month"),m=d([{icon:O,label:"Yeni Galeri",value:"0",change:"+0%",iconBg:"bg-blue-100 dark:bg-blue-900/30",iconColor:"text-blue-600 dark:text-blue-400",changeClass:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",key:"newGalleries"},{icon:Y,label:"Yeni Kullanıcı",value:"0",change:"+0%",iconBg:"bg-green-100 dark:bg-green-900/30",iconColor:"text-green-600 dark:text-green-400",changeClass:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",key:"newUsers"},{icon:_,label:"Toplam Araç",value:"0",change:"+0%",iconBg:"bg-purple-100 dark:bg-purple-900/30",iconColor:"text-purple-600 dark:text-purple-400",changeClass:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",key:"totalVehicles"},{icon:C,label:"Aktif Teklif",value:"0",change:"+0%",iconBg:"bg-orange-100 dark:bg-orange-900/30",iconColor:"text-orange-600 dark:text-orange-400",changeClass:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",key:"activeOffers"}]),k=d([]),o=d(null),h=async()=>{b.value=!0;try{const a=await u.get(`/reports?period=${i.value}`);m.value.forEach(t=>{a.stats&&a.stats[t.key]&&(t.value=a.stats[t.key].value?.toString()||"0",t.change=a.stats[t.key].change||"+0%")}),a.activities&&(k.value=a.activities),a.charts&&(o.value=a.charts)}catch(a){console.error("Raporlar yüklenemedi:",a),g.error("Raporlar yüklenemedi: "+a.message)}finally{b.value=!1}},B=async()=>{try{const a=await u.get(`/reports/export?period=${i.value}`,{responseType:"blob"}),t=window.URL.createObjectURL(a),r=document.createElement("a");r.href=t,r.download=`rapor-${i.value}-${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(t),g.success("Rapor indirildi!")}catch(a){g.error("Rapor indirilemedi: "+a.message)}},R=a=>new Date(a).toLocaleDateString("tr-TR");return D(i,()=>{h()}),T(()=>{h()}),(a,t)=>(s(),l("div",E,[e("div",N,[t[3]||(t[3]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Raporlar"),e("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Detaylı raporlar ve analitik")],-1)),e("div",F,[A(e("select",{"onUpdate:modelValue":t[0]||(t[0]=r=>i.value=r),class:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-sm text-gray-700 dark:text-gray-300"},[...t[1]||(t[1]=[e("option",{value:"week"},"Son Hafta",-1),e("option",{value:"month"},"Son Ay",-1),e("option",{value:"quarter"},"Son Çeyrek",-1),e("option",{value:"year"},"Son Yıl",-1)])],512),[[U,i.value]]),e("button",{onClick:B,class:"px-4 py-2 bg-gradient-to-r from-primary-500 to-primary-600 text-white font-semibold rounded-lg hover:shadow-lg transition-all"},[c(p($),{class:"w-4 h-4 inline mr-2"}),t[2]||(t[2]=j(" Rapor İndir ",-1))])])]),e("div",K,[(s(!0),l(v,null,f(m.value,r=>(s(),l("div",{key:r.label,class:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700"},[e("div",M,[e("div",{class:y(["w-12 h-12 rounded-xl flex items-center justify-center",r.iconBg])},[(s(),x(L(r.icon),{class:y(["w-6 h-6",r.iconColor])},null,8,["class"]))],2),e("span",{class:y(["text-xs font-semibold px-2 py-1 rounded-full",r.changeClass])},n(r.change),3)]),e("div",q,n(r.value),1),e("div",z,n(r.label),1)]))),128))]),e("div",H,[e("div",I,[t[5]||(t[5]=e("h3",{class:"text-lg font-bold text-gray-900 dark:text-white mb-4"},"Yeni Galeri Başvuruları",-1)),o.value&&o.value.galleryApplications?(s(),x(w,{key:0,type:"line",height:256,data:o.value.galleryApplications,options:{plugins:{legend:{display:!0,position:"top"}}}},null,8,["data"])):(s(),l("div",P,[e("div",J,[c(p(C),{class:"w-16 h-16 text-primary-400 mx-auto mb-2"}),t[4]||(t[4]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Grafik yükleniyor...",-1))])]))]),e("div",Q,[t[7]||(t[7]=e("h3",{class:"text-lg font-bold text-gray-900 dark:text-white mb-4"},"Araç İstatistikleri",-1)),o.value&&o.value.vehicleStatistics?(s(),x(w,{key:0,type:"bar",height:256,data:o.value.vehicleStatistics,options:{plugins:{legend:{display:!0,position:"top"}}}},null,8,["data"])):(s(),l("div",W,[e("div",X,[c(p(_),{class:"w-16 h-16 text-green-400 mx-auto mb-2"}),t[6]||(t[6]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Grafik yükleniyor...",-1))])]))])]),e("div",Z,[t[9]||(t[9]=e("div",{class:"p-6 border-b border-gray-200 dark:border-gray-700"},[e("h3",{class:"text-lg font-bold text-gray-900 dark:text-white"},"Son Aktiviteler")],-1)),e("div",ee,[e("table",te,[t[8]||(t[8]=e("thead",{class:"bg-gray-50 dark:bg-gray-700/50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase"},"Tarih"),e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase"},"Aktivite"),e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase"},"Kullanıcı"),e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase"},"Detay")])],-1)),e("tbody",re,[(s(!0),l(v,null,f(k.value,r=>(s(),l("tr",{key:r.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},[e("td",ae,n(R(r.date)),1),e("td",se,n(r.action),1),e("td",oe,n(r.user),1),e("td",le,n(r.details),1)]))),128))])])])])]))}});export{me as default};
