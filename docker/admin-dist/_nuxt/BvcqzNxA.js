import{d as j,p as d,q as T,v as U,e as l,a as e,x as G,y as R,b,h as L,u as p,F as c,r as x,c as u,o as s,n as g,f as B,t as o}from"./4jj4Bu4Q.js";import{u as P}from"./D0_PazS5.js";import{u as V}from"./oAyxGMvK.js";import{_ as A,T as $}from"./DTUq9_y2.js";import{D as q}from"./CAh0bGDo.js";import{c as E}from"./VCcvzI2M.js";import{U as M}from"./BKDShoHw.js";import{B as H}from"./Bon7PHJZ.js";import{C as I}from"./pNo8iLVM.js";const D=E("DollarSignIcon",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),N={class:"space-y-6"},O={class:"flex items-center justify-between"},F={class:"flex items-center gap-3"},K={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},z={class:"flex items-center justify-between mb-4"},Y={class:"text-3xl font-bold text-gray-900 dark:text-white mb-1"},J={class:"text-sm text-gray-600 dark:text-gray-400"},Q={class:"mt-2 text-xs text-gray-500 dark:text-gray-400"},W={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},X={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700"},Z={key:1,class:"h-64 flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-xl"},ee={class:"text-center"},te={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700"},re={key:1,class:"h-64 flex items-center justify-center bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-xl"},ae={class:"text-center"},se={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},oe={class:"lg:col-span-2 bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700"},le={class:"space-y-4"},ne={class:"flex items-center gap-3"},de={class:"font-semibold text-gray-900 dark:text-white"},ie={class:"text-sm text-gray-500 dark:text-gray-400"},ge={class:"text-right"},ce={class:"text-xl font-bold text-gray-900 dark:text-white"},xe={class:"text-xs text-gray-500 dark:text-gray-400"},ue={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700"},ye={class:"space-y-4"},be={class:"w-8 h-8 rounded-full bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center text-white font-semibold text-sm"},pe={class:"flex-1"},ke={class:"font-semibold text-gray-900 dark:text-white"},me={class:"text-xs text-gray-500 dark:text-gray-400"},he={class:"text-sm font-semibold text-primary-600 dark:text-primary-400"},ve={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700"},fe={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},_e={class:"text-2xl font-bold text-gray-900 dark:text-white mb-1"},we={class:"text-sm text-gray-600 dark:text-gray-400"},Ce={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},Pe=j({__name:"analytics",setup(Be){const k=P(),y=V(),m=d(!1),i=d("month"),h=d([{icon:M,label:"Aktif Kullanıcı",value:"0",change:"+0%",period:"Bu ay",iconBg:"bg-blue-100 dark:bg-blue-900/30",iconColor:"text-blue-600 dark:text-blue-400",changeClass:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",key:"activeUsers"},{icon:H,label:"Aktif Galeri",value:"0",change:"+0%",period:"Bu ay",iconBg:"bg-green-100 dark:bg-green-900/30",iconColor:"text-green-600 dark:text-green-400",changeClass:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",key:"activeGalleries"},{icon:I,label:"Toplam Araç",value:"0",change:"+0%",period:"Bu ay",iconBg:"bg-purple-100 dark:bg-purple-900/30",iconColor:"text-purple-600 dark:text-purple-400",changeClass:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",key:"totalVehicles"},{icon:D,label:"Toplam Gelir",value:"₺0",change:"+0%",period:"Bu ay",iconBg:"bg-orange-100 dark:bg-orange-900/30",iconColor:"text-orange-600 dark:text-orange-400",changeClass:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",key:"totalRevenue"}]),v=d([]),f=d([]),_=d([]),n=d(null),w=async()=>{m.value=!0;try{const a=await k.get(`/analytics?period=${i.value}`);h.value.forEach(r=>{a.metrics&&a.metrics[r.key]&&(r.value=a.metrics[r.key].value?.toString()||"0",r.change=a.metrics[r.key].change||"+0%")}),a.activities&&(v.value=a.activities),a.topPerformers&&(f.value=a.topPerformers),a.regions&&(_.value=a.regions),a.charts&&(n.value=a.charts)}catch(a){console.error("Analitik verileri yüklenemedi:",a),y.error("Analitik verileri yüklenemedi: "+a.message)}finally{m.value=!1}},S=async()=>{try{const a=await k.get(`/analytics/export?period=${i.value}`,{responseType:"blob"}),r=window.URL.createObjectURL(a),t=document.createElement("a");t.href=r,t.download=`analitik-${i.value}-${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(t),t.click(),document.body.removeChild(t),window.URL.revokeObjectURL(r),y.success("Analitik raporu indirildi!")}catch(a){y.error("Rapor indirilemedi: "+a.message)}};return T(i,()=>{w()}),U(()=>{w()}),(a,r)=>(s(),l("div",N,[e("div",O,[r[3]||(r[3]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Detaylı Analitik"),e("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Platform performansı ve kullanıcı davranışları")],-1)),e("div",F,[G(e("select",{"onUpdate:modelValue":r[0]||(r[0]=t=>i.value=t),class:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-sm text-gray-700 dark:text-gray-300"},[...r[1]||(r[1]=[e("option",{value:"week"},"Son Hafta",-1),e("option",{value:"month"},"Son Ay",-1),e("option",{value:"quarter"},"Son Çeyrek",-1),e("option",{value:"year"},"Son Yıl",-1)])],512),[[R,i.value]]),e("button",{onClick:S,class:"px-4 py-2 bg-gradient-to-r from-primary-500 to-primary-600 text-white font-semibold rounded-lg hover:shadow-lg transition-all"},[b(p(q),{class:"w-4 h-4 inline mr-2"}),r[2]||(r[2]=L(" Rapor İndir ",-1))])])]),e("div",K,[(s(!0),l(c,null,x(h.value,t=>(s(),l("div",{key:t.label,class:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700"},[e("div",z,[e("div",{class:g(["w-12 h-12 rounded-xl flex items-center justify-center",t.iconBg])},[(s(),u(B(t.icon),{class:g(["w-6 h-6",t.iconColor])},null,8,["class"]))],2),e("span",{class:g(["text-xs font-semibold px-2 py-1 rounded-full",t.changeClass])},o(t.change),3)]),e("div",Y,o(t.value),1),e("div",J,o(t.label),1),e("div",Q,o(t.period),1)]))),128))]),e("div",W,[e("div",X,[r[5]||(r[5]=e("h3",{class:"text-lg font-bold text-gray-900 dark:text-white mb-4"},"Kullanıcı Büyümesi",-1)),n.value&&n.value.userGrowth?(s(),u(A,{key:0,type:"line",height:256,data:n.value.userGrowth,options:{plugins:{legend:{display:!0,position:"top"}}}},null,8,["data"])):(s(),l("div",Z,[e("div",ee,[b(p($),{class:"w-16 h-16 text-blue-400 mx-auto mb-2"}),r[4]||(r[4]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Grafik yükleniyor...",-1))])]))]),e("div",te,[r[7]||(r[7]=e("h3",{class:"text-lg font-bold text-gray-900 dark:text-white mb-4"},"Gelir Trendi",-1)),n.value&&n.value.revenue?(s(),u(A,{key:0,type:"bar",height:256,data:n.value.revenue,options:{plugins:{legend:{display:!0,position:"top"}}}},null,8,["data"])):(s(),l("div",re,[e("div",ae,[b(p(D),{class:"w-16 h-16 text-green-400 mx-auto mb-2"}),r[6]||(r[6]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Grafik yükleniyor...",-1))])]))])]),e("div",se,[e("div",oe,[r[8]||(r[8]=e("h3",{class:"text-lg font-bold text-gray-900 dark:text-white mb-4"},"Aktivite Dağılımı",-1)),e("div",le,[(s(!0),l(c,null,x(v.value,t=>(s(),l("div",{key:t.type,class:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl"},[e("div",ne,[e("div",{class:g(["w-10 h-10 rounded-lg flex items-center justify-center",t.iconBg])},[(s(),u(B(t.icon),{class:g(["w-5 h-5",t.iconColor])},null,8,["class"]))],2),e("div",null,[e("div",de,o(t.type),1),e("div",ie,o(t.description),1)])]),e("div",ge,[e("div",ce,o(t.count),1),e("div",xe,o(t.percentage)+"%",1)])]))),128))])]),e("div",ue,[r[9]||(r[9]=e("h3",{class:"text-lg font-bold text-gray-900 dark:text-white mb-4"},"En İyi Performans",-1)),e("div",ye,[(s(!0),l(c,null,x(f.value,(t,C)=>(s(),l("div",{key:C,class:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-xl"},[e("div",be,o(C+1),1),e("div",pe,[e("div",ke,o(t.name),1),e("div",me,o(t.metric),1)]),e("div",he,o(t.value),1)]))),128))])])]),e("div",ve,[r[10]||(r[10]=e("h3",{class:"text-lg font-bold text-gray-900 dark:text-white mb-4"},"Coğrafi Dağılım",-1)),e("div",fe,[(s(!0),l(c,null,x(_.value,t=>(s(),l("div",{key:t.name,class:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl text-center"},[e("div",_e,o(t.count),1),e("div",we,o(t.name),1),e("div",Ce,o(t.percentage)+"%",1)]))),128))])])]))}});export{Pe as default};
