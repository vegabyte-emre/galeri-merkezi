import{d as D,i as g,k as F,l as N,e as d,a as e,x as v,t as s,b,u as p,F as A,r as $,m as M,q as z,A as B,o as n,h as u}from"./DhZVrtZb.js";import{u as L}from"./B0egXiWe.js";import{u as Y}from"./ZU3_NlSd.js";import{C as k}from"./BnWrGEP-.js";import{C as G}from"./COZXJiFL.js";import{c as q}from"./BBSYxXC8.js";const H=q("XCircleIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),I={class:"space-y-6"},P={class:"flex items-center justify-between"},S={class:"flex items-center gap-3"},X={class:"px-4 py-2 bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400 rounded-lg font-semibold"},E={key:0,class:"flex items-center justify-center py-12"},K={key:1,class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 p-12 text-center"},U={key:2,class:"space-y-4"},J={class:"p-6"},Q={class:"flex items-start justify-between"},W={class:"flex items-start gap-4"},Z={class:"w-32 h-24 bg-gradient-to-br from-primary-400 to-primary-600 rounded-xl flex items-center justify-center"},ee={class:"text-lg font-bold text-gray-900 dark:text-white"},te={class:"mt-2 space-y-1 text-sm text-gray-600 dark:text-gray-400"},ae={class:"text-right"},re={class:"px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-full text-sm font-medium"},se={class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},oe={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},le={key:0,class:"mt-4 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg"},de={class:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2"},ne={class:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between"},ie=["onClick","disabled"],ue=["onClick","disabled"],ye={class:"p-6 border-b border-gray-200 dark:border-gray-700"},ge={class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},me={class:"p-6"},ce={class:"p-6 border-t border-gray-200 dark:border-gray-700 flex items-center justify-end gap-3"},be=["disabled"],_e=D({__name:"vehicle-approvals",setup(pe){const x=L(),m=Y(),f=g(!0),o=g(null),l=g([]),c=g(!1),i=g(null),y=g(""),w=F(()=>l.value.length),h=async()=>{f.value=!0;try{const a=await x.get("/vehicles/pending-approval");a.success&&a.data&&(l.value=a.data)}catch(a){console.error("Onay bekleyen araçlar yüklenemedi:",a),m.error("Onay bekleyen araçlar yüklenemedi")}finally{f.value=!1}},_=async a=>{o.value=a;try{await x.post(`/vehicles/${a}/approve`),m.success("Araç onaylandı ve Oto Pazarı'nda yayınlandı!"),l.value=l.value.filter(t=>t.id!==a)}catch(t){m.error("Hata: "+t.message)}finally{o.value=null}},C=a=>{i.value=a,y.value="",c.value=!0},j=async()=>{if(!(!i.value||!y.value.trim())){o.value=i.value.id;try{await x.post(`/vehicles/${i.value.id}/reject`,{reason:y.value}),m.success("Araç reddedildi"),l.value=l.value.filter(a=>a.id!==i.value.id),c.value=!1}catch(a){m.error("Hata: "+a.message)}finally{o.value=null}}},R=a=>new Intl.NumberFormat("tr-TR").format(a||0),V=a=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",minimumFractionDigits:0,maximumFractionDigits:0}).format(a||0),T=a=>a?new Date(a).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-";return N(()=>{h()}),(a,t)=>(n(),d("div",I,[e("div",P,[t[4]||(t[4]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Araç Onayları"),e("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Galerilerden gelen araç onay taleplerini yönetin")],-1)),e("div",S,[e("div",X,s(w.value)+" Onay Bekliyor ",1)])]),f.value?(n(),d("div",E,[...t[5]||(t[5]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"},null,-1)])])):l.value.length===0?(n(),d("div",K,[b(p(k),{class:"w-16 h-16 text-green-500 mx-auto mb-4"}),t[6]||(t[6]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"Tüm Onaylar Tamamlandı",-1)),t[7]||(t[7]=e("p",{class:"text-gray-500 dark:text-gray-400"},"Şu anda onay bekleyen araç bulunmuyor.",-1))])):(n(),d("div",U,[(n(!0),d(A,null,$(l.value,r=>(n(),d("div",{key:r.id,class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden"},[e("div",J,[e("div",Q,[e("div",W,[e("div",Z,[b(p(G),{class:"w-12 h-12 text-white opacity-50"})]),e("div",null,[e("h3",ee,s(r.brand)+" "+s(r.model),1),e("div",te,[e("p",null,[t[8]||(t[8]=e("span",{class:"font-medium"},"Yıl:",-1)),u(" "+s(r.year),1)]),e("p",null,[t[9]||(t[9]=e("span",{class:"font-medium"},"Kilometre:",-1)),u(" "+s(R(r.mileage))+" km",1)]),e("p",null,[t[10]||(t[10]=e("span",{class:"font-medium"},"Fiyat:",-1)),u(" "+s(V(r.base_price)),1)]),e("p",null,[t[11]||(t[11]=e("span",{class:"font-medium"},"Yakıt:",-1)),u(" "+s(r.fuel_type)+" | ",1),t[12]||(t[12]=e("span",{class:"font-medium"},"Vites:",-1)),u(" "+s(r.transmission),1)])])])]),e("div",ae,[e("div",re,s(r.gallery_name||"Galeri"),1),e("p",se,s(r.gallery_city||""),1),e("p",oe," Gönderilme: "+s(T(r.submitted_at)),1)])]),r.description?(n(),d("div",le,[e("p",de,s(r.description),1)])):v("",!0),e("div",ne,[e("button",{onClick:O=>C(r),disabled:o.value===r.id,class:"px-4 py-2 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors font-semibold flex items-center gap-2"},[b(p(H),{class:"w-4 h-4"}),t[13]||(t[13]=u(" Reddet ",-1))],8,ie),e("button",{onClick:O=>_(r.id),disabled:o.value===r.id,class:"px-6 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:shadow-lg transition-all font-semibold flex items-center gap-2"},[b(p(k),{class:"w-4 h-4"}),u(" "+s(o.value===r.id?"İşleniyor...":"Onayla ve Yayınla"),1)],8,ue)])])]))),128))])),c.value?(n(),d("div",{key:3,class:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:t[3]||(t[3]=r=>c.value=!1)},[e("div",{class:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-w-md w-full",onClick:t[2]||(t[2]=B(()=>{},["stop"]))},[e("div",ye,[t[14]||(t[14]=e("h2",{class:"text-xl font-bold text-gray-900 dark:text-white"},"Aracı Reddet",-1)),e("p",ge,s(i.value?.brand)+" "+s(i.value?.model),1)]),e("div",me,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Reddedilme Sebebi * ",-1)),M(e("textarea",{"onUpdate:modelValue":t[0]||(t[0]=r=>y.value=r),rows:"4",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Reddedilme sebebini açıklayın..."},null,512),[[z,y.value]])]),e("div",ce,[e("button",{onClick:t[1]||(t[1]=r=>c.value=!1),class:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"}," İptal "),e("button",{onClick:j,disabled:!y.value.trim()||o.value,class:"px-4 py-2 bg-red-500 text-white font-semibold rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50"},s(o.value?"İşleniyor...":"Reddet"),9,be)])])])):v("",!0)]))}});export{_e as default};
