import{d as T,i as d,j as U,k as D,l as j,e as g,o as n,a as t,m,v as R,p as k,b as f,u as h,q as A,h as V,F as w,r as _,n as p,c as E,f as H,t as l}from"./CgVBj6KV.js";import{u as I}from"./BtigsF4L.js";import{u as N}from"./BbkIy0g5.js";import{S as M}from"./B5SFO129.js";import{D as O}from"./Cjs6Czd-.js";import{a as P,A as $,I as q}from"./vnhth1p2.js";import{C as F}from"./Bk4TDieb.js";import"./B6IpsRfb.js";const z={class:"space-y-6"},K={class:"flex items-center justify-between"},Q={class:"flex items-center gap-3"},Z={class:"flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-800 rounded-lg"},G={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},J={class:"flex items-center justify-between mb-4"},W={class:"text-3xl font-bold text-gray-900 dark:text-white mb-1"},X={class:"text-sm text-gray-600 dark:text-gray-400"},Y={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden"},ee={class:"overflow-x-auto"},te={class:"w-full"},ae={class:"divide-y divide-gray-200 dark:divide-gray-700"},re={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},oe={class:"px-6 py-4 whitespace-nowrap"},se={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},le={class:"px-6 py-4 text-sm text-gray-900 dark:text-white"},ie={class:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400"},ne={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},de={class:"p-6 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between"},ge={class:"text-sm text-gray-600 dark:text-gray-400"},fe=T({__name:"logs",setup(ce){const u=I(),y=N(),b=d(!1),o=d(""),s=d(""),L={error:"Hata",warning:"Uyarı",info:"Bilgi",success:"Başarılı"},x=d([{icon:P,label:"Toplam Hata",value:"0",iconBg:"bg-red-100 dark:bg-red-900/30",iconColor:"text-red-600 dark:text-red-400",key:"error"},{icon:$,label:"Uyarı",value:"0",iconBg:"bg-yellow-100 dark:bg-yellow-900/30",iconColor:"text-yellow-600 dark:text-yellow-400",key:"warning"},{icon:q,label:"Bilgi",value:"0",iconBg:"bg-blue-100 dark:bg-blue-900/30",iconColor:"text-blue-600 dark:text-blue-400",key:"info"},{icon:F,label:"Başarılı",value:"0",iconBg:"bg-green-100 dark:bg-green-900/30",iconColor:"text-green-600 dark:text-green-400",key:"success"}]),c=d([]),v=async()=>{b.value=!0;try{const r=new URLSearchParams;s.value&&r.append("level",s.value),o.value&&r.append("search",o.value);const a=await u.get(`/logs?${r.toString()}`);c.value=a.logs||a||[],a.stats?x.value.forEach(e=>{a.stats[e.key]&&(e.value=a.stats[e.key].toString())}):x.value.forEach(e=>{e.value=c.value.filter(i=>i.level===e.key).length.toString()})}catch(r){console.error("Loglar yüklenemedi:",r),y.error("Loglar yüklenemedi: "+r.message)}finally{b.value=!1}};U([s,o],()=>{v()});const S=D(()=>{let r=c.value;if(s.value&&(r=r.filter(a=>a.level===s.value)),o.value){const a=o.value.toLowerCase();r=r.filter(e=>e.action.toLowerCase().includes(a)||e.details.toLowerCase().includes(a)||e.user&&e.user.toLowerCase().includes(a))}return r}),C=r=>new Date(r).toLocaleString("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),B=async()=>{try{const r=new URLSearchParams;s.value&&r.append("level",s.value),o.value&&r.append("search",o.value);const a=await u.get(`/logs/export?${r.toString()}`,{responseType:"blob"}),e=window.URL.createObjectURL(a),i=document.createElement("a");i.href=e,i.download=`logs-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(e),y.success("Loglar başarıyla dışa aktarıldı!")}catch(r){y.error("Hata: "+r.message)}};return j(()=>{v()}),(r,a)=>(n(),g("div",z,[t("div",K,[a[4]||(a[4]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Sistem Logları"),t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Sistem aktivitelerini ve hataları takip edin")],-1)),t("div",Q,[m(t("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>s.value=e),class:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-sm text-gray-700 dark:text-gray-300"},[...a[2]||(a[2]=[k('<option value="">Tüm Seviyeler</option><option value="error">Hata</option><option value="warning">Uyarı</option><option value="info">Bilgi</option><option value="success">Başarılı</option>',5)])],512),[[R,s.value]]),t("div",Z,[f(h(M),{class:"w-4 h-4 text-gray-400"}),m(t("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>o.value=e),type:"text",placeholder:"Log ara...",class:"bg-transparent border-0 outline-0 text-sm text-gray-700 dark:text-gray-300 placeholder-gray-400 w-64"},null,512),[[A,o.value]])]),t("button",{onClick:B,class:"px-4 py-2 bg-gradient-to-r from-primary-500 to-primary-600 text-white font-semibold rounded-lg hover:shadow-lg transition-all"},[f(h(O),{class:"w-4 h-4 inline mr-2"}),a[3]||(a[3]=V(" Dışa Aktar ",-1))])])]),t("div",G,[(n(!0),g(w,null,_(x.value,e=>(n(),g("div",{key:e.label,class:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700"},[t("div",J,[t("div",{class:p(["w-12 h-12 rounded-xl flex items-center justify-center",e.iconBg])},[(n(),E(H(e.icon),{class:p(["w-6 h-6",e.iconColor])},null,8,["class"]))],2)]),t("div",W,l(e.value),1),t("div",X,l(e.label),1)]))),128))]),t("div",Y,[t("div",ee,[t("table",te,[a[5]||(a[5]=t("thead",{class:"bg-gray-50 dark:bg-gray-700/50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase"},"Zaman"),t("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase"},"Seviye"),t("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase"},"Kullanıcı"),t("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase"},"Aktivite"),t("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase"},"Detay"),t("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase"},"IP")])],-1)),t("tbody",ae,[(n(!0),g(w,null,_(S.value,e=>(n(),g("tr",{key:e.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},[t("td",re,l(C(e.timestamp)),1),t("td",oe,[t("span",{class:p(["px-2 py-1 text-xs font-semibold rounded-full",{"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":e.level==="error","bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":e.level==="warning","bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":e.level==="info","bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":e.level==="success"}])},l(L[e.level]),3)]),t("td",se,l(e.user||"Sistem"),1),t("td",le,l(e.action),1),t("td",ie,l(e.details),1),t("td",ne,l(e.ip),1)]))),128))])])]),t("div",de,[t("div",ge," Toplam "+l(c.value.length)+" log gösteriliyor ",1),a[6]||(a[6]=k('<div class="flex items-center gap-2"><button class="px-3 py-2 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"> Önceki </button><button class="px-3 py-2 bg-primary-500 text-white rounded-lg font-semibold">1</button><button class="px-3 py-2 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"> 2 </button><button class="px-3 py-2 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"> Sonraki </button></div>',1))])])]))}});export{fe as default};
