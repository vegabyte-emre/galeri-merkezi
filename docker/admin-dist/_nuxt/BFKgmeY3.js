import{d as z,i,k as E,l as M,e as g,a as e,x as v,b as w,m as n,u as h,q as y,h as G,F as I,r as T,A as C,v as k,o as x,t as u,n as U}from"./CgVBj6KV.js";import{u as B}from"./BtigsF4L.js";import{u as N}from"./BbkIy0g5.js";import{S as P}from"./B5SFO129.js";import{P as R}from"./YGn0wbfb.js";import"./B6IpsRfb.js";const H={class:"space-y-6"},q={class:"flex items-center justify-between"},F={class:"flex items-center gap-3"},Y={class:"flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-800 rounded-lg"},O={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden"},Q={class:"overflow-x-auto"},J={class:"w-full"},W={class:"divide-y divide-gray-200 dark:divide-gray-700"},X={class:"px-6 py-4 whitespace-nowrap"},Z={class:"flex items-center gap-3"},ee={class:"w-10 h-10 rounded-full bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center text-white font-semibold"},te={class:"font-medium text-gray-900 dark:text-white"},ae={class:"text-sm text-gray-500 dark:text-gray-400"},re={class:"px-6 py-4 whitespace-nowrap"},le={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},se={class:"px-6 py-4 whitespace-nowrap"},oe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},de={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},ne={class:"flex items-center justify-end gap-2"},ie=["onClick"],ue=["onClick"],ge={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-w-md w-full p-6"},ye={class:"space-y-4"},xe={class:"flex items-center justify-end gap-3 mt-6"},pe={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-w-md w-full p-6"},me={key:0,class:"space-y-4"},be={class:"flex items-center justify-end gap-3 mt-6"},Ue=z({__name:"users",setup(ce){const b=B(),o=N(),f=i(!1),c=i(""),p=i(!1),m=i(!1),l=i(null),s=i({name:"",email:"",password:"",role:"gallery_owner",galleryId:null}),K={admin:"Admin",gallery_owner:"Galeri Sahibi",user:"Kullanıcı"},d=i([]),S=async()=>{f.value=!0;try{const r=await b.get("/users");d.value=r.users||r||[]}catch(r){console.error("Kullanıcılar yüklenemedi:",r),o.error("Kullanıcılar yüklenemedi: "+r.message)}finally{f.value=!1}},V=E(()=>{if(!c.value)return d.value;const r=c.value.toLowerCase();return d.value.filter(t=>t.name.toLowerCase().includes(r)||t.email.toLowerCase().includes(r)||t.gallery&&t.gallery.toLowerCase().includes(r))}),A=r=>new Date(r).toLocaleDateString("tr-TR"),L=r=>{const t=d.value.find(a=>a.id===r);t&&(l.value={...t},m.value=!0)},D=async()=>{if(!l.value||!l.value.name||!l.value.email){o.warning("Lütfen tüm gerekli alanları doldurun");return}try{const r=await b.put(`/users/${l.value.id}`,{name:l.value.name,email:l.value.email,role:l.value.role,status:l.value.status}),t=d.value.findIndex(a=>a.id===l.value.id);t>-1&&(d.value[t]=r),m.value=!1,l.value=null,o.success("Kullanıcı güncellendi!")}catch(r){o.error("Hata: "+r.message)}},_=async()=>{if(!s.value.name||!s.value.email||!s.value.password){o.warning("Lütfen tüm gerekli alanları doldurun");return}try{const r=await b.post("/users",s.value);d.value.push(r),p.value=!1,s.value={name:"",email:"",password:"",role:"gallery_owner",galleryId:null},o.success("Kullanıcı başarıyla oluşturuldu!")}catch(r){o.error("Hata: "+r.message)}},$=async r=>{if(confirm("Bu kullanıcıyı silmek istediğinize emin misiniz?"))try{await b.delete(`/users/${r}`);const t=d.value.findIndex(a=>a.id===r);t>-1&&d.value.splice(t,1),o.success("Kullanıcı silindi!")}catch(t){o.error("Hata: "+t.message)}};return M(()=>{S()}),(r,t)=>(x(),g("div",H,[e("div",q,[t[15]||(t[15]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Kullanıcılar"),e("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Tüm kullanıcıları görüntüleyin ve yönetin")],-1)),e("div",F,[e("div",Y,[w(h(P),{class:"w-4 h-4 text-gray-400"}),n(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>c.value=a),type:"text",placeholder:"Kullanıcı ara...",class:"bg-transparent border-0 outline-0 text-sm text-gray-700 dark:text-gray-300 placeholder-gray-400 w-64"},null,512),[[y,c.value]])]),e("button",{onClick:t[1]||(t[1]=a=>p.value=!0),class:"px-4 py-2 bg-gradient-to-r from-primary-500 to-primary-600 text-white font-semibold rounded-lg hover:shadow-lg transition-all"},[w(h(R),{class:"w-4 h-4 inline mr-2"}),t[14]||(t[14]=G(" Yeni Kullanıcı ",-1))])])]),e("div",O,[e("div",Q,[e("table",J,[t[16]||(t[16]=e("thead",{class:"bg-gray-50 dark:bg-gray-700/50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider"},"Kullanıcı"),e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider"},"Rol"),e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider"},"Galeri"),e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider"},"Durum"),e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider"},"Son Giriş"),e("th",{class:"px-6 py-3 text-right text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider"},"İşlemler")])],-1)),e("tbody",W,[(x(!0),g(I,null,T(V.value,a=>(x(),g("tr",{key:a.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},[e("td",X,[e("div",Z,[e("div",ee,u(a.name.charAt(0)),1),e("div",null,[e("div",te,u(a.name),1),e("div",ae,u(a.email),1)])])]),e("td",re,[e("span",{class:U(["px-2 py-1 text-xs font-semibold rounded-full",{"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400":a.role==="admin","bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":a.role==="gallery_owner","bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-400":a.role==="user"}])},u(K[a.role]),3)]),e("td",le,u(a.gallery||"-"),1),e("td",se,[e("span",{class:U(["px-2 py-1 text-xs font-semibold rounded-full",{"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":a.status==="active","bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-400":a.status==="inactive"}])},u(a.status==="active"?"Aktif":"Pasif"),3)]),e("td",oe,u(A(a.lastLogin)),1),e("td",de,[e("div",ne,[e("button",{onClick:j=>L(a.id),class:"px-3 py-1.5 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors text-xs font-semibold"}," Düzenle ",8,ie),e("button",{onClick:j=>$(a.id),class:"px-3 py-1.5 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors text-xs font-semibold"}," Sil ",8,ue)])])]))),128))])])])]),p.value?(x(),g("div",{key:0,class:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:t[7]||(t[7]=C(a=>p.value=!1,["self"]))},[e("div",ge,[t[22]||(t[22]=e("h3",{class:"text-xl font-bold text-gray-900 dark:text-white mb-4"}," Yeni Kullanıcı Ekle ",-1)),e("div",ye,[e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Ad Soyad ",-1)),n(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>s.value.name=a),type:"text",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Ad Soyad"},null,512),[[y,s.value.name]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," E-posta ",-1)),n(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>s.value.email=a),type:"email",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"email@example.com"},null,512),[[y,s.value.email]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Şifre ",-1)),n(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>s.value.password=a),type:"password",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Şifre"},null,512),[[y,s.value.password]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Rol ",-1)),n(e("select",{"onUpdate:modelValue":t[5]||(t[5]=a=>s.value.role=a),class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},[...t[20]||(t[20]=[e("option",{value:"admin"},"Admin",-1),e("option",{value:"gallery_owner"},"Galeri Sahibi",-1),e("option",{value:"user"},"Kullanıcı",-1)])],512),[[k,s.value.role]])])]),e("div",xe,[e("button",{onClick:t[6]||(t[6]=a=>{p.value=!1,s.value={name:"",email:"",password:"",role:"gallery_owner",galleryId:null}}),class:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"}," İptal "),e("button",{onClick:_,class:"px-4 py-2 bg-gradient-to-r from-primary-500 to-primary-600 text-white font-semibold rounded-lg hover:shadow-lg transition-all"}," Oluştur ")])])])):v("",!0),m.value?(x(),g("div",{key:1,class:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:t[13]||(t[13]=C(a=>m.value=!1,["self"]))},[e("div",pe,[t[29]||(t[29]=e("h3",{class:"text-xl font-bold text-gray-900 dark:text-white mb-4"}," Kullanıcı Düzenle ",-1)),l.value?(x(),g("div",me,[e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Ad Soyad ",-1)),n(e("input",{"onUpdate:modelValue":t[8]||(t[8]=a=>l.value.name=a),type:"text",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Ad Soyad"},null,512),[[y,l.value.name]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," E-posta ",-1)),n(e("input",{"onUpdate:modelValue":t[9]||(t[9]=a=>l.value.email=a),type:"email",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"email@example.com"},null,512),[[y,l.value.email]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Rol ",-1)),n(e("select",{"onUpdate:modelValue":t[10]||(t[10]=a=>l.value.role=a),class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},[...t[25]||(t[25]=[e("option",{value:"admin"},"Admin",-1),e("option",{value:"gallery_owner"},"Galeri Sahibi",-1),e("option",{value:"user"},"Kullanıcı",-1)])],512),[[k,l.value.role]])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Durum ",-1)),n(e("select",{"onUpdate:modelValue":t[11]||(t[11]=a=>l.value.status=a),class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},[...t[27]||(t[27]=[e("option",{value:"active"},"Aktif",-1),e("option",{value:"inactive"},"Pasif",-1)])],512),[[k,l.value.status]])])])):v("",!0),e("div",be,[e("button",{onClick:t[12]||(t[12]=a=>{m.value=!1,l.value=null}),class:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"}," İptal "),e("button",{onClick:D,class:"px-4 py-2 bg-gradient-to-r from-primary-500 to-primary-600 text-white font-semibold rounded-lg hover:shadow-lg transition-all"}," Kaydet ")])])])):v("",!0)]))}});export{Ue as default};
