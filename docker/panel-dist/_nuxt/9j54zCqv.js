import{d as T,i as l,j,y as R,e as d,a as t,l as A,O as B,b as c,h as M,u as y,F as u,r as b,t as r,o,n as p,c as z,f as I,E as P}from"./BHohwXV2.js";import{u as E}from"./Wng_DxSk.js";import{u as G}from"./DQvU_I8x.js";import{c as _}from"./C79RIGEr.js";import{U as O}from"./ChFQI8ad.js";import{D as F}from"./OROG95L2.js";import{T as h}from"./ldmR4908.js";import{D as L}from"./-3snLb_u.js";const N=_("EyeIcon",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const U=_("PieChartIcon",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),V={class:"space-y-6"},$={class:"flex items-center justify-between"},K={class:"flex items-center gap-3"},Y={class:"px-4 py-2 bg-gradient-to-r from-primary-500 to-primary-600 text-white font-semibold rounded-lg hover:shadow-lg transition-all"},q={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},H={class:"flex items-center justify-between mb-4"},Z={class:"text-3xl font-bold text-gray-900 dark:text-white mb-1"},J={class:"text-sm text-gray-600 dark:text-gray-400"},Q={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},W={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700"},X={class:"h-64 flex items-center justify-center bg-gradient-to-br from-primary-50 to-primary-100 dark:from-primary-900/20 dark:to-primary-800/20 rounded-xl"},tt={class:"text-center"},et={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700"},at={class:"h-64 flex items-center justify-center bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-xl"},rt={class:"text-center"},st={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ot={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700"},lt={class:"space-y-4"},dt={class:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl"},nt={class:"text-2xl font-bold text-gray-900 dark:text-white"},it={class:"text-right"},gt={class:"text-2xl font-bold text-green-600 dark:text-green-400"},xt={class:"space-y-2"},ct={class:"flex items-center justify-between text-sm"},yt={class:"font-semibold text-gray-900 dark:text-white"},ut={class:"flex items-center justify-between text-sm"},bt={class:"font-semibold text-gray-900 dark:text-white"},pt={class:"flex items-center justify-between text-sm"},mt={class:"font-semibold text-gray-900 dark:text-white"},kt={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700"},ft={class:"space-y-4"},vt={class:"flex items-center justify-between mb-2"},ht={class:"font-semibold text-gray-900 dark:text-white"},_t={class:"text-sm text-gray-600 dark:text-gray-400"},wt={class:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2"},St={class:"mt-2 flex items-center justify-between text-sm text-gray-600 dark:text-gray-400"},Dt={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700"},Ct={class:"overflow-x-auto"},Tt={class:"w-full"},jt={class:"divide-y divide-gray-200 dark:divide-gray-700"},Rt={class:"px-6 py-4"},At={class:"font-semibold text-gray-900 dark:text-white"},Bt={class:"text-sm text-gray-500 dark:text-gray-400"},Mt={class:"px-6 py-4 font-semibold text-gray-900 dark:text-white"},Ut=T({__name:"reports",setup(zt){const g=E(),w=G(),x=l("month"),m=l(!1),n=l(null),S=l(null),s=l(null),D=j(()=>n.value?[{icon:N,label:"Toplam Görüntülenme",value:"N/A",change:"+0%",iconBg:"bg-blue-100 dark:bg-blue-900/30",iconColor:"text-blue-600 dark:text-blue-400",changeClass:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400"},{icon:O,label:"Toplam Teklif",value:s.value?.data?.incoming+s.value?.data?.outgoing||"0",change:"+0%",iconBg:"bg-green-100 dark:bg-green-900/30",iconColor:"text-green-600 dark:text-green-400",changeClass:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400"},{icon:F,label:"Toplam Gelir",value:n.value?.data?.summary?.totalRevenue?.toLocaleString("tr-TR")||"0",change:"+0%",iconBg:"bg-purple-100 dark:bg-purple-900/30",iconColor:"text-purple-600 dark:text-purple-400",changeClass:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400"},{icon:h,label:"Satılan Araç",value:n.value?.data?.summary?.totalSold||"0",change:"+0%",iconBg:"bg-orange-100 dark:bg-orange-900/30",iconColor:"text-orange-600 dark:text-orange-400",changeClass:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400"}]:[]),C=l([]);l([]);const k=async()=>{try{m.value=!0;const i=new Date,e=new Date;switch(x.value){case"week":e.setDate(e.getDate()-7);break;case"month":e.setMonth(e.getMonth()-1);break;case"quarter":e.setMonth(e.getMonth()-3);break;case"year":e.setFullYear(e.getFullYear()-1);break}const[a,f,v]=await Promise.all([g.get(`/reports/sales?start_date=${e.toISOString()}&end_date=${i.toISOString()}`),g.get("/reports/inventory"),g.get(`/reports/offers?start_date=${e.toISOString()}&end_date=${i.toISOString()}`)]);a.success&&(n.value=a),f.success&&(S.value=f),v.success&&(s.value=v)}catch(i){w.error("Raporlar yüklenemedi: "+i.message)}finally{m.value=!1}};return R(()=>{k()}),(i,e)=>(o(),d("div",V,[t("div",$,[e[3]||(e[3]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Raporlar & Analitik"),t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Detaylı raporlar ve performans analizi")],-1)),t("div",K,[A(t("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>x.value=a),onChange:k,class:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-sm text-gray-700 dark:text-gray-300"},[...e[1]||(e[1]=[t("option",{value:"week"},"Son Hafta",-1),t("option",{value:"month"},"Son Ay",-1),t("option",{value:"quarter"},"Son Çeyrek",-1),t("option",{value:"year"},"Son Yıl",-1)])],544),[[B,x.value]]),t("button",Y,[c(y(L),{class:"w-4 h-4 inline mr-2"}),e[2]||(e[2]=M(" Rapor İndir ",-1))])])]),t("div",q,[(o(!0),d(u,null,b(D.value,a=>(o(),d("div",{key:a.label,class:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700"},[t("div",H,[t("div",{class:p(["w-12 h-12 rounded-xl flex items-center justify-center",a.iconBg])},[(o(),z(I(a.icon),{class:p(["w-6 h-6",a.iconColor])},null,8,["class"]))],2),t("span",{class:p(["text-xs font-semibold px-2 py-1 rounded-full",a.changeClass])},r(a.change),3)]),t("div",Z,r(a.value),1),t("div",J,r(a.label),1)]))),128))]),t("div",Q,[t("div",W,[e[5]||(e[5]=t("h3",{class:"text-lg font-bold text-gray-900 dark:text-white mb-4"},"Satış Performansı",-1)),t("div",X,[t("div",tt,[c(y(h),{class:"w-16 h-16 text-primary-400 mx-auto mb-2"}),e[4]||(e[4]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Grafik buraya gelecek",-1))])])]),t("div",et,[e[7]||(e[7]=t("h3",{class:"text-lg font-bold text-gray-900 dark:text-white mb-4"},"Araç Durumu Dağılımı",-1)),t("div",at,[t("div",rt,[c(y(U),{class:"w-16 h-16 text-green-400 mx-auto mb-2"}),e[6]||(e[6]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Grafik buraya gelecek",-1))])])])]),t("div",st,[t("div",ot,[e[13]||(e[13]=t("h3",{class:"text-lg font-bold text-gray-900 dark:text-white mb-4"},"Teklif Analizi",-1)),t("div",lt,[t("div",dt,[t("div",null,[e[8]||(e[8]=t("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"Toplam Teklif",-1)),t("div",nt,r((s.value?.data?.incoming||0)+(s.value?.data?.outgoing||0)),1)]),t("div",it,[e[9]||(e[9]=t("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"Kabul Oranı",-1)),t("div",gt,r(s.value?.data?.byStatus?.find(a=>a.status==="accepted")?.count||0),1)])]),t("div",xt,[t("div",ct,[e[10]||(e[10]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Kabul Edilen",-1)),t("span",yt,r(s.value?.data?.byStatus?.find(a=>a.status==="accepted")?.count||0),1)]),t("div",ut,[e[11]||(e[11]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Reddedilen",-1)),t("span",bt,r(s.value?.data?.byStatus?.find(a=>a.status==="rejected")?.count||0),1)]),t("div",pt,[e[12]||(e[12]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Bekleyen",-1)),t("span",mt,r(s.value?.data?.byStatus?.find(a=>a.status==="pending")?.count||0),1)])])])]),t("div",kt,[e[14]||(e[14]=t("h3",{class:"text-lg font-bold text-gray-900 dark:text-white mb-4"},"Kanal Performansı",-1)),t("div",ft,[(o(!0),d(u,null,b(C.value,a=>(o(),d("div",{key:a.name,class:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl"},[t("div",vt,[t("span",ht,r(a.name),1),t("span",_t,r(a.views)+" görüntülenme",1)]),t("div",wt,[t("div",{class:"bg-primary-500 h-2 rounded-full transition-all",style:P({width:a.percentage+"%"})},null,4)]),t("div",St,[t("span",null,r(a.leads)+" lead",1),t("span",null,r(a.sales)+" satış",1)])]))),128))])])]),t("div",Dt,[e[19]||(e[19]=t("div",{class:"p-6 border-b border-gray-200 dark:border-gray-700"},[t("h3",{class:"text-lg font-bold text-gray-900 dark:text-white"},"En Çok Görüntülenen Araçlar")],-1)),t("div",Ct,[t("table",Tt,[e[18]||(e[18]=t("thead",{class:"bg-gray-50 dark:bg-gray-700/50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase"},"Araç"),t("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase"},"Fiyat"),t("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase"},"Görüntülenme"),t("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase"},"Teklif"),t("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase"},"Durum")])],-1)),t("tbody",jt,[(o(!0),d(u,null,b((n.value?.data?.monthly||[]).slice(0,5),a=>(o(),d("tr",{key:a.month,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},[t("td",Rt,[t("div",At,r(new Date(a.month).toLocaleDateString("tr-TR",{month:"long",year:"numeric"})),1),t("div",Bt,r(a.count)+" araç satıldı",1)]),t("td",Mt,r(a.revenue?.toLocaleString("tr-TR"))+" ₺",1),e[15]||(e[15]=t("td",{class:"px-6 py-4 text-gray-600 dark:text-gray-400"},"-",-1)),e[16]||(e[16]=t("td",{class:"px-6 py-4 text-gray-600 dark:text-gray-400"},"-",-1)),e[17]||(e[17]=t("td",{class:"px-6 py-4"},[t("span",{class:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400"}," Satıldı ")],-1))]))),128))])])])])]))}});export{Ut as default};
