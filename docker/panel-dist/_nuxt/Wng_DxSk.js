import{p as h,q as m}from"./BHohwXV2.js";const y=()=>{const f=h().public.apiUrl,a=async(t,e={})=>{const r=m("auth_token"),{responseType:c,...s}=e,i={...s.headers||{}};s.body instanceof FormData||(i["Content-Type"]="application/json"),r.value&&(i.Authorization=`Bearer ${r.value}`);const n=new AbortController,l=setTimeout(()=>n.abort(),3e4);try{const o=await fetch(`${f}${t}`,{...s,headers:i,signal:n.signal});if(clearTimeout(l),!o.ok){let u="Request failed";try{u=(await o.json()).message||u}catch{u=`HTTP ${o.status}: ${o.statusText}`}throw new Error(u)}return c==="blob"?o.blob():o.json()}catch(o){throw clearTimeout(l),o.name==="AbortError"?new Error("Request timeout. Please try again."):o}};return{get:(t,e,r)=>{let c=t;if(e&&Object.keys(e).length>0){const s=new URLSearchParams(Object.entries(e).filter(([i,n])=>n!=null&&n!=="").map(([i,n])=>[i,String(n)])).toString();s&&(c+=`?${s}`)}return a(c,{...r,method:"GET"})},post:(t,e,r)=>a(t,{...r,method:"POST",body:e instanceof FormData?e:JSON.stringify(e)}),put:(t,e,r)=>a(t,{...r,method:"PUT",body:e instanceof FormData?e:JSON.stringify(e)}),delete:(t,e)=>a(t,{...e,method:"DELETE"})}};export{y as u};
