import{d as S,i as p,j as U,y as V,e as i,a as r,k as x,l as I,O as B,b as L,h as M,u as N,F as R,r as O,o as a,n as b,c as T,f as $,m as u,t as l}from"./DEjyqQKJ.js";import{u as z}from"./B27iJoBY.js";import{u as E}from"./wOfkbFz6.js";import{D as F}from"./BqL2hPjp.js";import{C as P}from"./DY-LUMgO.js";import{U as q}from"./YCKZJxsN.js";import{M as G}from"./bzZvqBIy.js";import{S as H}from"./B667yD0G.js";import{U as J}from"./DM5yeRSE.js";import"./CBMyLIAc.js";const K={class:"space-y-6"},Q={class:"flex items-center justify-between"},W={class:"flex items-center gap-3"},X={class:"space-y-4"},Y={class:"flex items-start gap-4"},Z={class:"flex-1 min-w-0"},ee={class:"flex items-start justify-between mb-2"},te={class:"font-semibold text-gray-900 dark:text-white"},re={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},se={class:"text-xs text-gray-500 dark:text-gray-400 whitespace-nowrap ml-4"},ae={key:0,class:"mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg"},oe={class:"text-sm text-gray-600 dark:text-gray-400"},ne={class:"flex items-center gap-2 mb-1"},ie={class:"flex items-center gap-2 mb-1"},le={class:"mt-2 text-xs text-gray-500 dark:text-gray-400"},de={key:0},ge={key:1},ue={key:2},we=S({__name:"activity",setup(ce){const k=z(),c=E(),o=p(""),m=p(!1),g=p([]),_=e=>e.includes("vehicle")?P:e.includes("offer")?q:e.includes("message")?G:e.includes("settings")?H:J,v=e=>e.includes("vehicle")?"bg-blue-100 dark:bg-blue-900/30":e.includes("offer")?"bg-green-100 dark:bg-green-900/30":e.includes("message")?"bg-purple-100 dark:bg-purple-900/30":e.includes("settings")?"bg-orange-100 dark:bg-orange-900/30":"bg-gray-100 dark:bg-gray-900/30",h=e=>e.includes("vehicle")?"text-blue-600 dark:text-blue-400":e.includes("offer")?"text-green-600 dark:text-green-400":e.includes("message")?"text-purple-600 dark:text-purple-400":e.includes("settings")?"text-orange-600 dark:text-orange-400":"text-gray-600 dark:text-gray-400",w=U(()=>o.value?g.value.filter(e=>e.action_type?.includes(o.value)||e.entity_type===o.value):g.value),A=async()=>{try{m.value=!0;const e={};o.value&&(e.type=o.value);const s=await k.get("/activity",{params:e});s.success&&s.data&&(g.value=s.data)}catch(e){c.error("Aktivite geçmişi yüklenemedi: "+e.message)}finally{m.value=!1}},y=e=>new Date(e).toLocaleString("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),j=async()=>{try{const e=["Tarih","Aktivite Tipi","Varlık Tipi","Açıklama","IP Adresi"],s=g.value.map(n=>[y(n.created_at),n.action_type||"",n.entity_type||"",n.description||"",n.ip_address||""]),t=[e.join(","),...s.map(n=>n.map(D=>`"${D}"`).join(","))].join(`
`),C=new Blob([t],{type:"text/csv;charset=utf-8;"}),f=window.URL.createObjectURL(C),d=document.createElement("a");d.href=f,d.download=`activity-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(f),c.success("Aktivite geçmişi dışa aktarıldı")}catch(e){c.error("Hata: "+e.message)}};return V(()=>{A()}),(e,s)=>(a(),i("div",K,[r("div",Q,[s[3]||(s[3]=r("div",null,[r("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Aktivite Geçmişi"),r("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Tüm işlemlerinizin kaydı")],-1)),r("div",W,[I(r("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>o.value=t),class:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-sm text-gray-700 dark:text-gray-300"},[...s[1]||(s[1]=[x('<option value="">Tüm Aktiviteler</option><option value="vehicle">Araç İşlemleri</option><option value="offer">Teklif İşlemleri</option><option value="message">Mesaj İşlemleri</option><option value="settings">Ayarlar</option>',5)])],512),[[B,o.value]]),r("button",{onClick:j,class:"px-4 py-2 bg-gradient-to-r from-primary-500 to-primary-600 text-white font-semibold rounded-lg hover:shadow-lg transition-all"},[L(N(F),{class:"w-4 h-4 inline mr-2"}),s[2]||(s[2]=M(" Dışa Aktar ",-1))])])]),r("div",X,[(a(!0),i(R,null,O(w.value,t=>(a(),i("div",{key:t.id,class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 p-6"},[r("div",Y,[r("div",{class:b(["w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0",v(t.action_type||t.entity_type||"")])},[(a(),T($(_(t.action_type||t.entity_type||"")),{class:b(["w-6 h-6",h(t.action_type||t.entity_type||"")])},null,8,["class"]))],2),r("div",Z,[r("div",ee,[r("div",null,[r("h3",te,l(t.action_type||"Aktivite"),1),r("p",re,l(t.description||`${t.entity_type} işlemi`),1)]),r("span",se,l(y(t.created_at)),1)]),t.entity_id?(a(),i("div",ae,[r("div",oe,[r("div",ne,[s[4]||(s[4]=r("span",{class:"font-medium"},"Varlık Tipi:",-1)),r("span",null,l(t.entity_type),1)]),r("div",ie,[s[5]||(s[5]=r("span",{class:"font-medium"},"Varlık ID:",-1)),r("span",null,l(t.entity_id),1)])])])):u("",!0),r("div",le,[t.ip_address?(a(),i("span",de,"IP: "+l(t.ip_address),1)):u("",!0),t.ip_address&&t.user_agent?(a(),i("span",ge," • ")):u("",!0),t.user_agent?(a(),i("span",ue,l(t.user_agent),1)):u("",!0)])])])]))),128))]),s[6]||(s[6]=x('<div class="flex items-center justify-center gap-2"><button class="px-4 py-2 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"> Önceki </button><button class="px-4 py-2 bg-primary-500 text-white rounded-lg font-semibold">1</button><button class="px-4 py-2 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"> 2 </button><button class="px-4 py-2 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"> Sonraki </button></div>',1))]))}});export{we as default};
