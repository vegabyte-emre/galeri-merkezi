import{u as $}from"./B27iJoBY.js";import{u as R}from"./wOfkbFz6.js";import{C as b}from"./DY-LUMgO.js";import{d as D,i as y,y as N,e as i,a as e,m as p,n as m,t as a,F as w,r as T,b as k,u as v,o as l}from"./DEjyqQKJ.js";import"./CBMyLIAc.js";const S={class:"space-y-6"},F={class:"flex items-center justify-between"},K={class:"flex items-center gap-3"},L={key:0,class:"text-center py-12"},O={key:1,class:"space-y-4"},B={class:"flex items-start justify-between"},E={class:"flex-1"},H={class:"flex items-center gap-4 mb-4"},A={class:"w-16 h-16 rounded-xl bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center flex-shrink-0"},V={class:"text-lg font-bold text-gray-900 dark:text-white mb-1"},z={class:"text-sm text-gray-500 dark:text-gray-400"},M={class:"grid grid-cols-3 gap-4"},Y={class:"text-xl font-bold text-primary-600 dark:text-primary-400"},P={class:"text-lg font-semibold text-gray-900 dark:text-white"},q={key:0,class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},I={key:0,class:"flex flex-col gap-2 ml-4"},J=["onClick"],Q=["onClick"],U=["onClick"],W={key:2,class:"space-y-4"},X={class:"flex items-start justify-between"},Z={class:"flex-1"},tt={class:"flex items-center gap-4 mb-4"},et={class:"w-16 h-16 rounded-xl bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center flex-shrink-0"},rt={class:"text-lg font-bold text-gray-900 dark:text-white mb-1"},st={class:"text-sm text-gray-500 dark:text-gray-400"},at={class:"grid grid-cols-3 gap-4"},it={class:"text-xl font-bold text-primary-600 dark:text-primary-400"},lt={class:"text-lg font-semibold text-gray-900 dark:text-white"},dt={key:3,class:"text-center py-16 bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700"},nt={class:"text-gray-600 dark:text-gray-400"},mt=D({__name:"offers",setup(ot){const c=$(),n=R(),d=y("incoming"),g=y(!1),h={pending:"Bekliyor",sent:"Gönderildi",viewed:"Görüntülendi",accepted:"Kabul Edildi",rejected:"Reddedildi",counter_offer:"Karşı Teklif",cancelled:"İptal Edildi",expired:"Süresi Doldu"},o=y([]),u=y([]),_=async()=>{g.value=!0;try{const s=await c.get("/offers/incoming");s.success&&s.data&&(o.value=s.data.map(t=>({id:t.id,vehicle:{brand:t.brand,model:t.model,price:t.base_price},from:t.buyer_gallery_name||"Galeri",price:t.amount,status:t.status,date:t.created_at,message:t.note||""})));const r=await c.get("/offers/outgoing");r.success&&r.data&&(u.value=r.data.map(t=>({id:t.id,vehicle:{brand:t.brand,model:t.model,price:t.base_price},to:t.seller_gallery_name||"Galeri",price:t.amount,status:t.status,date:t.created_at})))}catch(s){console.error("Teklifler yüklenemedi:",s),n.error("Teklifler yüklenemedi: "+s.message)}finally{g.value=!1}},f=s=>new Date(s).toLocaleDateString("tr-TR"),C=async s=>{const r=o.value.find(t=>t.id===s);if(r)try{await c.post(`/offers/${s}/accept`),r.status="accepted",n.success("Teklif kabul edildi!")}catch(t){n.error("Hata: "+t.message)}},j=async s=>{const r=o.value.find(t=>t.id===s);if(r)try{await c.post(`/offers/${s}/reject`),r.status="rejected",n.success("Teklif reddedildi!")}catch(t){n.error("Hata: "+t.message)}},G=async s=>{const r=o.value.find(t=>t.id===s);if(r){const t=prompt(`Mevcut teklif: ${r.price.toLocaleString("tr-TR")} ₺
Karşı teklif fiyatı:`,r.price.toString());if(t&&!isNaN(Number(t)))try{await c.post(`/offers/${s}/counter`,{amount:Number(t)}),n.success("Karşı teklif gönderildi!"),await _()}catch(x){n.error("Hata: "+x.message)}}};return N(()=>{_()}),(s,r)=>(l(),i("div",S,[e("div",F,[r[2]||(r[2]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Teklifler"),e("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Gelen ve giden teklifleri yönetin")],-1)),e("div",K,[e("button",{onClick:r[0]||(r[0]=t=>d.value="incoming"),class:m(["px-4 py-2 rounded-lg font-semibold transition-colors",d.value==="incoming"?"bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300"])}," Gelen Teklifler ("+a(o.value.length)+") ",3),e("button",{onClick:r[1]||(r[1]=t=>d.value="outgoing"),class:m(["px-4 py-2 rounded-lg font-semibold transition-colors",d.value==="outgoing"?"bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300"])}," Giden Teklifler ("+a(u.value.length)+") ",3)])]),g.value?(l(),i("div",L,[...r[3]||(r[3]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1),e("p",{class:"mt-4 text-gray-600 dark:text-gray-400"},"Yükleniyor...",-1)])])):d.value==="incoming"?(l(),i("div",O,[(l(!0),i(w,null,T(o.value,t=>(l(),i("div",{key:t.id,class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 p-6 hover:shadow-xl transition-all"},[e("div",B,[e("div",E,[e("div",H,[e("div",A,[k(v(b),{class:"w-8 h-8 text-white"})]),e("div",null,[e("h3",V,a(t.vehicle.brand)+" "+a(t.vehicle.model),1),e("p",z,a(t.from)+" • "+a(f(t.date)),1)])]),e("div",M,[e("div",null,[r[4]||(r[4]=e("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"Teklif Fiyatı",-1)),e("div",Y,a((t.price||0).toLocaleString("tr-TR"))+" ₺",1)]),e("div",null,[r[5]||(r[5]=e("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"Araç Fiyatı",-1)),e("div",P,a((t.vehicle.price||0).toLocaleString("tr-TR"))+" ₺",1)]),e("div",null,[r[6]||(r[6]=e("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"Durum",-1)),e("span",{class:m(["inline-block px-2 py-1 text-xs font-semibold rounded-full",{"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":t.status==="pending"||t.status==="sent"||t.status==="viewed","bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":t.status==="accepted","bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":t.status==="rejected"||t.status==="cancelled"||t.status==="expired","bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":t.status==="counter_offer"}])},a(h[t.status]||t.status),3)])]),t.message?(l(),i("p",q,a(t.message),1)):p("",!0)]),t.status==="pending"||t.status==="sent"||t.status==="viewed"?(l(),i("div",I,[e("button",{onClick:x=>C(t.id),class:"px-4 py-2 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-lg hover:bg-green-200 dark:hover:bg-green-900/50 transition-colors font-semibold"}," Kabul Et ",8,J),e("button",{onClick:x=>j(t.id),class:"px-4 py-2 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors font-semibold"}," Reddet ",8,Q),e("button",{onClick:x=>G(t.id),class:"px-4 py-2 bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400 rounded-lg hover:bg-primary-200 dark:hover:bg-primary-900/50 transition-colors font-semibold"}," Karşı Teklif ",8,U)])):p("",!0)])]))),128))])):d.value==="outgoing"?(l(),i("div",W,[(l(!0),i(w,null,T(u.value,t=>(l(),i("div",{key:t.id,class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 p-6 hover:shadow-xl transition-all"},[e("div",X,[e("div",Z,[e("div",tt,[e("div",et,[k(v(b),{class:"w-8 h-8 text-white"})]),e("div",null,[e("h3",rt,a(t.vehicle.brand)+" "+a(t.vehicle.model),1),e("p",st,a(t.to)+" • "+a(f(t.date)),1)])]),e("div",at,[e("div",null,[r[7]||(r[7]=e("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"Teklif Fiyatı",-1)),e("div",it,a(t.price)+" ₺",1)]),e("div",null,[r[8]||(r[8]=e("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"Araç Fiyatı",-1)),e("div",lt,a(t.vehicle.price)+" ₺",1)]),e("div",null,[r[9]||(r[9]=e("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"Durum",-1)),e("span",{class:m(["inline-block px-2 py-1 text-xs font-semibold rounded-full",{"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":t.status==="pending","bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":t.status==="accepted","bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":t.status==="rejected"}])},a(h[t.status]),3)])])])])]))),128))])):!g.value&&(d.value==="incoming"&&o.value.length===0||d.value==="outgoing"&&u.value.length===0)?(l(),i("div",dt,[k(v(b),{class:"w-24 h-24 text-gray-400 mx-auto mb-4"}),r[10]||(r[10]=e("h3",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-2"},"Henüz Teklif Yok",-1)),e("p",nt,a(d.value==="incoming"?"Gelen teklif bulunmuyor.":"Giden teklif bulunmuyor."),1)])):p("",!0)]))}});export{mt as default};
