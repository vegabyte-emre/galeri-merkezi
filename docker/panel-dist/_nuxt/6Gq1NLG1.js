import{_ as M}from"./DyRZUrWL.js";import{d as L,i as v,j as k,e as d,a as e,b as y,w as N,m as p,F as w,r as C,u as g,t as s,Q as S,o,h as U,n as f,l as H,I as E}from"./DEjyqQKJ.js";import{u as D}from"./B27iJoBY.js";import{A as G}from"./Du00fVyd.js";import{U as I}from"./BtFLC1IR.js";import{c as T}from"./CBMyLIAc.js";import{X as Y}from"./CeRfKS35.js";import{C as $}from"./Caid1-L0.js";const K=T("FileCheckIcon",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]),P={class:"space-y-6"},O={class:"flex items-center justify-between"},Q={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 p-6"},R={class:"flex items-center justify-between mb-8"},W={class:"flex flex-col items-center flex-1"},X={class:"mt-2 text-xs text-gray-600 dark:text-gray-400 text-center"},q={key:0,class:"space-y-6"},J={class:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl p-12 text-center hover:border-primary-500 transition-colors cursor-pointer"},Z={key:0,class:"p-4 bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-800 rounded-lg"},ee={class:"flex items-center justify-between"},te={class:"flex items-center gap-3"},ae={class:"font-semibold text-green-900 dark:text-green-100"},se={class:"text-sm text-green-700 dark:text-green-300"},re={key:1,class:"space-y-6"},le={class:"flex items-center justify-between mb-4"},de={class:"text-sm text-gray-600 dark:text-gray-400"},oe={class:"overflow-x-auto"},ie={class:"w-full"},ne={class:"divide-y divide-gray-200 dark:divide-gray-700"},ce={class:"px-4 py-3"},xe=["onUpdate:modelValue"],ye={class:"px-4 py-3 text-sm text-gray-900 dark:text-white"},pe={class:"px-4 py-3 text-sm text-gray-900 dark:text-white"},ge={class:"px-4 py-3 text-sm text-gray-900 dark:text-white"},ue={class:"px-4 py-3 text-sm text-gray-900 dark:text-white"},me={class:"px-4 py-3 text-sm text-gray-900 dark:text-white"},be={class:"px-4 py-3"},ve={key:2,class:"space-y-6"},ke={class:"text-center"},he={class:"text-gray-600 dark:text-gray-400"},fe={class:"grid grid-cols-3 gap-4"},_e={class:"text-center p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl"},we={class:"text-2xl font-bold text-gray-900 dark:text-white"},Ce={class:"text-center p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl"},De={class:"text-2xl font-bold text-gray-900 dark:text-white"},Ae={class:"text-center p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl"},ze={class:"text-2xl font-bold text-red-600 dark:text-red-400"},Fe={class:"flex items-center justify-between pt-6 border-t border-gray-200 dark:border-gray-700"},Ve={key:1},je=["disabled"],Be=["disabled"],Te=L({__name:"bulk",setup(Me){const A=S(),r=v(0),u=v(!1),x=v(null),m=["Dosya Yükle","Önizleme","Onayla"],c=v([{selected:!0,brand:"BMW",model:"320i",year:2020,km:45e3,price:85e4,status:"valid"},{selected:!0,brand:"Mercedes",model:"C200",year:2019,km:6e4,price:92e4,status:"valid"},{selected:!1,brand:"Audi",model:"A4",year:2021,km:3e4,price:115e4,status:"valid"},{selected:!0,brand:"",model:"Passat",year:2018,km:75e3,price:65e4,status:"invalid"}]),z=k(()=>r.value===0?x.value!==null:r.value===1?h.value>0:!0),h=k(()=>c.value.filter(l=>l.selected).length),F=k(()=>c.value.filter(l=>l.selected&&l.status==="valid").length),V=k(()=>c.value.filter(l=>l.selected&&l.status==="invalid").length),j=async l=>{const t=l.target;if(t.files&&t.files[0]){x.value=t.files[0];try{const n=new FormData;n.append("file",t.files[0]);const i=await D().post("/vehicles/bulk/parse",n,{headers:{"Content-Type":"multipart/form-data"}});c.value=i.data.map(b=>({...b,selected:!0,status:b.valid?"valid":"invalid"})),_()}catch(n){alert("Dosya yüklenirken hata oluştu: "+n.message)}}},_=()=>{r.value<m.length-1&&r.value++},B=async()=>{u.value=!0;try{const l=c.value.filter(a=>a.selected&&a.status==="valid"),n=await D().post("/vehicles/bulk/import",{vehicles:l.map(a=>({brand:a.brand,model:a.model,year:a.year,km:a.km,price:a.price}))});alert(`${n.count} araç başarıyla eklendi!`),A.push("/vehicles")}catch(l){alert("Hata: "+l.message)}finally{u.value=!1}};return(l,t)=>{const n=M;return o(),d("div",P,[e("div",O,[e("div",null,[y(n,{to:"/vehicles",class:"text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 mb-2 inline-flex items-center gap-1"},{default:N(()=>[y(g(G),{class:"w-4 h-4"}),t[2]||(t[2]=U(" Araçlara Dön ",-1))]),_:1}),t[3]||(t[3]=e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Toplu İşlemler",-1)),t[4]||(t[4]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Birden fazla aracı aynı anda yönetin",-1))])]),e("div",Q,[e("div",R,[(o(),d(w,null,C(m,(a,i)=>e("div",{key:i,class:"flex items-center flex-1"},[e("div",W,[e("div",{class:f(["w-10 h-10 rounded-full flex items-center justify-center font-semibold transition-all",r.value>i?"bg-primary-500 text-white":r.value===i?"bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 border-2 border-primary-500":"bg-gray-100 dark:bg-gray-700 text-gray-400"])},s(r.value>i?"✓":i+1),3),e("span",X,s(a),1)]),i<m.length-1?(o(),d("div",{key:0,class:f(["flex-1 h-0.5 mx-2",r.value>i?"bg-primary-500":"bg-gray-200 dark:bg-gray-700"])},null,2)):p("",!0)])),64))]),r.value===0?(o(),d("div",q,[e("div",J,[y(g(I),{class:"w-16 h-16 text-gray-400 mx-auto mb-4"}),t[5]||(t[5]=e("h3",{class:"text-lg font-bold text-gray-900 dark:text-white mb-2"},"Excel Dosyası Yükle",-1)),t[6]||(t[6]=e("p",{class:"text-gray-600 dark:text-gray-400 mb-4"}," Araç bilgilerinizi içeren Excel dosyasını yükleyin ",-1)),e("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:j,class:"hidden",id:"file-upload"},null,32),t[7]||(t[7]=e("label",{for:"file-upload",class:"inline-block px-6 py-3 bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400 rounded-lg hover:bg-primary-200 dark:hover:bg-primary-900/50 transition-colors font-semibold cursor-pointer"}," Dosya Seç ",-1)),t[8]||(t[8]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-4"}," Desteklenen formatlar: .xlsx, .xls, .csv ",-1))]),x.value?(o(),d("div",Z,[e("div",ee,[e("div",te,[y(g(K),{class:"w-5 h-5 text-green-600 dark:text-green-400"}),e("div",null,[e("div",ae,s(x.value.name),1),e("div",se,s(x.value.size)+" KB",1)])]),e("button",{onClick:t[0]||(t[0]=a=>x.value=null),class:"text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300"},[y(g(Y),{class:"w-5 h-5"})])])])):p("",!0)])):p("",!0),r.value===1?(o(),d("div",re,[e("div",le,[t[9]||(t[9]=e("h3",{class:"text-lg font-bold text-gray-900 dark:text-white"},"Önizleme",-1)),e("div",de,s(c.value.length)+" araç bulundu ",1)]),e("div",oe,[e("table",ie,[t[10]||(t[10]=e("thead",{class:"bg-gray-50 dark:bg-gray-700/50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase"},[e("input",{type:"checkbox",class:"rounded"})]),e("th",{class:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase"},"Marka"),e("th",{class:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase"},"Model"),e("th",{class:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase"},"Yıl"),e("th",{class:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase"},"Km"),e("th",{class:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase"},"Fiyat"),e("th",{class:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase"},"Durum")])],-1)),e("tbody",ne,[(o(!0),d(w,null,C(c.value,(a,i)=>(o(),d("tr",{key:i,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50"},[e("td",ce,[H(e("input",{type:"checkbox","onUpdate:modelValue":b=>a.selected=b,class:"rounded"},null,8,xe),[[E,a.selected]])]),e("td",ye,s(a.brand),1),e("td",pe,s(a.model),1),e("td",ge,s(a.year),1),e("td",ue,s(a.km),1),e("td",me,s(a.price)+" ₺",1),e("td",be,[e("span",{class:f(["px-2 py-1 text-xs font-semibold rounded-full",a.status==="valid"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"])},s(a.status==="valid"?"Geçerli":"Hatalı"),3)])]))),128))])])])])):p("",!0),r.value===2?(o(),d("div",ve,[e("div",ke,[y(g($),{class:"w-16 h-16 text-green-500 mx-auto mb-4"}),t[11]||(t[11]=e("h3",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-2"},"İşlem Özeti",-1)),e("p",he,s(h.value)+" araç eklenecek ",1)]),e("div",fe,[e("div",_e,[e("div",we,s(h.value),1),t[12]||(t[12]=e("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"Seçilen",-1))]),e("div",Ce,[e("div",De,s(F.value),1),t[13]||(t[13]=e("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"Geçerli",-1))]),e("div",Ae,[e("div",ze,s(V.value),1),t[14]||(t[14]=e("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"Hatalı",-1))])])])):p("",!0),e("div",Fe,[r.value>0?(o(),d("button",{key:0,onClick:t[1]||(t[1]=a=>r.value--),class:"px-6 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors font-semibold"}," Geri ")):(o(),d("div",Ve)),r.value<m.length-1?(o(),d("button",{key:2,onClick:_,disabled:!z.value,class:"px-6 py-2 bg-gradient-to-r from-primary-500 to-primary-600 text-white font-semibold rounded-lg hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed"}," İleri ",8,je)):(o(),d("button",{key:3,onClick:B,disabled:u.value,class:"px-6 py-2 bg-gradient-to-r from-primary-500 to-primary-600 text-white font-semibold rounded-lg hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed"},s(u.value?"İçe Aktarılıyor...":"İçe Aktar"),9,Be))])])])}}});export{Te as default};
